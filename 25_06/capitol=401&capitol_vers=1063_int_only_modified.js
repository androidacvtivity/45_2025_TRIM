// Now this change, as previsioly 

var from = "";

$(document).ready(function () {
    form = $("#formDenShort").val();
    CAP2();
});

$(function () {
    $("input:not([type='button']):not([readonly]):not([disabled])").on("change", function (e) {
        CAP2();
    });
});


// === Helpers for integer-only chapter (Cap. II) ===
// Parse to integer safely (treats '', null, undefined, '000' as 0; ignores spaces)
function toInt(v) {
    const s = (v == null ? "" : String(v)).replace(/\s+/g, "");
    const n = parseInt(s, 10);
    return Number.isNaN(n) ? 0 : n;
}
// Format integer: if total is 0 -> empty string (hide zeros)
function formatInt(n) {
    return n === 0 ? "" : String(n);
}
// Set value and underlying property to avoid template default like value="000"
function setFormatted($el, total) {
    const out = formatInt(total);
    $el.val(out).prop("value", out);
}
// Sum helper over jQuery inputs
function sumVals() {
    let total = 0;
    for (let i = 0; i < arguments.length; i++) {
        total += toInt(arguments[i].val());
    }
    return total;
}

function CAP2() {

    //-------------------------------Rind 7100-----------------------------------------------------

    var R7100_C1 = $("#45_401_83256_7100_1");
    var R7100_C2 = $("#45_401_83256_7100_2");
    var R7100_C3 = $("#45_401_83256_7100_3");
    var R7100_C4 = $("#45_401_83256_7100_4");

    //-------------------------------Rind 7110-----------------------------------------------------

    var R7110_C1 = $("#45_401_83257_7110_1");
    var R7110_C2 = $("#45_401_83257_7110_2");
    var R7110_C3 = $("#45_401_83257_7110_3");
    var R7110_C4 = $("#45_401_83257_7110_4");

    //-------------------------------Rind 7120-----------------------------------------------------

    var R7120_C1 = $("#45_401_83258_7120_1");
    var R7120_C2 = $("#45_401_83258_7120_2");
    var R7120_C3 = $("#45_401_83258_7120_3");
    var R7120_C4 = $("#45_401_83258_7120_4");

    //-------------------------------Rind 7130-----------------------------------------------------

    var R7130_C1 = $("#45_401_83259_7130_1");
    var R7130_C2 = $("#45_401_83259_7130_2");
    var R7130_C3 = $("#45_401_83259_7130_3");
    var R7130_C4 = $("#45_401_83259_7130_4");

    //-------------------------------Rind 7140-----------------------------------------------------

    var R7140_C1 = $("#45_401_83260_7140_1");
    var R7140_C2 = $("#45_401_83260_7140_2");
    var R7140_C3 = $("#45_401_83260_7140_3");
    var R7140_C4 = $("#45_401_83260_7140_4");

    //-------------------------------Rind 7200-----------------------------------------------------

    var R7200_C1 = $("#45_401_83261_7200_1");
    var R7200_C2 = $("#45_401_83261_7200_2");
    var R7200_C3 = $("#45_401_83261_7200_3");
    var R7200_C4 = $("#45_401_83261_7200_4");

    //-------------------------------Rind 7210-----------------------------------------------------

    var R7210_C1 = $("#45_401_83262_7210_1");
    var R7210_C2 = $("#45_401_83262_7210_2");
    var R7210_C3 = $("#45_401_83262_7210_3");
    var R7210_C4 = $("#45_401_83262_7210_4");

    //-------------------------------Rind 7220-----------------------------------------------------

    var R7220_C1 = $("#45_401_83263_7220_1");
    var R7220_C2 = $("#45_401_83263_7220_2");
    var R7220_C3 = $("#45_401_83263_7220_3");
    var R7220_C4 = $("#45_401_83263_7220_4");

    //-------------------------------Rind 7230-----------------------------------------------------

    var R7230_C1 = $("#45_401_83264_7230_1");
    var R7230_C2 = $("#45_401_83264_7230_2");
    var R7230_C3 = $("#45_401_83264_7230_3");
    var R7230_C4 = $("#45_401_83264_7230_4");

    //-------------------------------Rind 7240-----------------------------------------------------

    var R7240_C1 = $("#45_401_83265_7240_1");
    var R7240_C2 = $("#45_401_83265_7240_2");
    var R7240_C3 = $("#45_401_83265_7240_3");
    var R7240_C4 = $("#45_401_83265_7240_4");

    //-------------------------------Rind 7250-----------------------------------------------------

    var R7250_C1 = $("#45_401_83266_7250_1");
    var R7250_C2 = $("#45_401_83266_7250_2");
    var R7250_C3 = $("#45_401_83266_7250_3");
    var R7250_C4 = $("#45_401_83266_7250_4");

    //-------------------------------Rind 7260-----------------------------------------------------

    var R7260_C1 = $("#45_401_83267_7260_1");
    var R7260_C2 = $("#45_401_83267_7260_2");
    var R7260_C3 = $("#45_401_83267_7260_3");
    var R7260_C4 = $("#45_401_83267_7260_4");

    //-------------------------------Rind 7300-----------------------------------------------------

    var R7300_C1 = $("#45_401_83268_7300_1");
    var R7300_C2 = $("#45_401_83268_7300_2");
    var R7300_C3 = $("#45_401_83268_7300_3");
    var R7300_C4 = $("#45_401_83268_7300_4");

    //-------------------------------Rind 7310-----------------------------------------------------

    var R7310_C1 = $("#45_401_83269_7310_1");
    var R7310_C2 = $("#45_401_83269_7310_2");
    var R7310_C3 = $("#45_401_83269_7310_3");
    var R7310_C4 = $("#45_401_83269_7310_4");

    //-------------------------------Rind 7320-----------------------------------------------------

    var R7320_C1 = $("#45_401_83270_7320_1");
    var R7320_C2 = $("#45_401_83270_7320_2");
    var R7320_C3 = $("#45_401_83270_7320_3");
    var R7320_C4 = $("#45_401_83270_7320_4");

    //-------------------------------Rind 7330-----------------------------------------------------

    var R7330_C1 = $("#45_401_83271_7330_1");
    var R7330_C2 = $("#45_401_83271_7330_2");
    var R7330_C3 = $("#45_401_83271_7330_3");
    var R7330_C4 = $("#45_401_83271_7330_4");

    //-------------------------------Rind 7400-----------------------------------------------------

    var R7400_C1 = $("#45_401_83272_7400_1");
    var R7400_C2 = $("#45_401_83272_7400_2");
    var R7400_C3 = $("#45_401_83272_7400_3");
    var R7400_C4 = $("#45_401_83272_7400_4");

    //-------------------------------Rind 7410-----------------------------------------------------

    var R7410_C1 = $("#45_401_83273_7410_1");
    var R7410_C2 = $("#45_401_83273_7410_2");
    var R7410_C3 = $("#45_401_83273_7410_3");
    var R7410_C4 = $("#45_401_83273_7410_4");

    //-------------------------------Rind 7420-----------------------------------------------------

    var R7420_C1 = $("#45_401_83274_7420_1");
    var R7420_C2 = $("#45_401_83274_7420_2");
    var R7420_C3 = $("#45_401_83274_7420_3");
    var R7420_C4 = $("#45_401_83274_7420_4");

    //-------------------------------Rind 7430-----------------------------------------------------

    var R7430_C1 = $("#45_401_83275_7430_1");
    var R7430_C2 = $("#45_401_83275_7430_2");
    var R7430_C3 = $("#45_401_83275_7430_3");
    var R7430_C4 = $("#45_401_83275_7430_4");

    //-------------------------------Rind 7440-----------------------------------------------------

    var R7440_C1 = $("#45_401_83276_7440_1");
    var R7440_C2 = $("#45_401_83276_7440_2");
    var R7440_C3 = $("#45_401_83276_7440_3");
    var R7440_C4 = $("#45_401_83276_7440_4");

    //-------------------------------Rind 7450-----------------------------------------------------

    var R7450_C1 = $("#45_401_83277_7450_1");
    var R7450_C2 = $("#45_401_83277_7450_2");
    var R7450_C3 = $("#45_401_83277_7450_3");
    var R7450_C4 = $("#45_401_83277_7450_4");

    //-------------------------------Rind 7460-----------------------------------------------------

    var R7460_C1 = $("#45_401_83278_7460_1");
    var R7460_C2 = $("#45_401_83278_7460_2");
    var R7460_C3 = $("#45_401_83278_7460_3");
    var R7460_C4 = $("#45_401_83278_7460_4");

    //-------------------------------Rind 7470-----------------------------------------------------

    var R7470_C1 = $("#45_401_83279_7470_1");
    var R7470_C2 = $("#45_401_83279_7470_2");
    var R7470_C3 = $("#45_401_83279_7470_3");
    var R7470_C4 = $("#45_401_83279_7470_4");

    //-------------------------------Rind 7480-----------------------------------------------------

    var R7480_C1 = $("#45_401_83280_7480_1");
    var R7480_C2 = $("#45_401_83280_7480_2");
    var R7480_C3 = $("#45_401_83280_7480_3");
    var R7480_C4 = $("#45_401_83280_7480_4");

    //-------------------------------Rind 7490-----------------------------------------------------

    var R7490_C1 = $("#45_401_83281_7490_1");
    var R7490_C2 = $("#45_401_83281_7490_2");
    var R7490_C3 = $("#45_401_83281_7490_3");
    var R7490_C4 = $("#45_401_83281_7490_4");

    //-------------------------------Rind 7500-----------------------------------------------------

    var R7500_C1 = $("#45_401_83282_7500_1");
    var R7500_C2 = $("#45_401_83282_7500_2");
    var R7500_C3 = $("#45_401_83282_7500_3");
    var R7500_C4 = $("#45_401_83282_7500_4");

    //-------------------------------Rind 7510-----------------------------------------------------

    var R7510_C1 = $("#45_401_83283_7510_1");
    var R7510_C2 = $("#45_401_83283_7510_2");
    var R7510_C3 = $("#45_401_83283_7510_3");
    var R7510_C4 = $("#45_401_83283_7510_4");

    //-------------------------------Rind 7520-----------------------------------------------------

    var R7520_C1 = $("#45_401_83284_7520_1");
    var R7520_C2 = $("#45_401_83284_7520_2");
    var R7520_C3 = $("#45_401_83284_7520_3");
    var R7520_C4 = $("#45_401_83284_7520_4");

    //----------readOnly input -----------------------  

    R7100_C1.prop("readonly", true);
    R7100_C2.prop("readonly", true);
    R7100_C3.prop("readonly", true);
    R7100_C4.prop("readonly", true);

    R7200_C1.prop("readonly", true);
    R7200_C2.prop("readonly", true);
    R7200_C3.prop("readonly", true);
    R7200_C4.prop("readonly", true);

    R7300_C1.prop("readonly", true);
    R7300_C2.prop("readonly", true);
    R7300_C3.prop("readonly", true);
    R7300_C4.prop("readonly", true);

    R7400_C1.prop("readonly", true);
    R7400_C2.prop("readonly", true);
    R7400_C3.prop("readonly", true);
    R7400_C4.prop("readonly", true);

    R7500_C1.prop("readonly", true);
    R7500_C2.prop("readonly", true);
    R7500_C3.prop("readonly", true);
    R7500_C4.prop("readonly", true);

    //-------------------------------Rind 7100-----------------------------------------------------

//-------------------------------Rind 7200-----------------------------------------------------

//-------------------------------Rind 7300-----------------------------------------------------

//-------------------------------Rind 7400-----------------------------------------------------

//-------------------------------Rind 7500-----------------------------------------------------



    //-------------------------------Recalculări cu întregi (fără afișare 0)-----------------------
    // 7100 = 7110 + 7120 + 7130 + 7140
    setFormatted(R7100_C1, sumVals(R7110_C1, R7120_C1, R7130_C1, R7140_C1));
    setFormatted(R7100_C2, sumVals(R7110_C2, R7120_C2, R7130_C2, R7140_C2));
    setFormatted(R7100_C3, sumVals(R7110_C3, R7120_C3, R7130_C3, R7140_C3));
    setFormatted(R7100_C4, sumVals(R7110_C4, R7120_C4, R7130_C4, R7140_C4));

    // 7200 = 7210 + 7220 + 7230 + 7240 + 7250 + 7260
    setFormatted(R7200_C1, sumVals(R7210_C1, R7220_C1, R7230_C1, R7240_C1, R7250_C1, R7260_C1));
    setFormatted(R7200_C2, sumVals(R7210_C2, R7220_C2, R7230_C2, R7240_C2, R7250_C2, R7260_C2));
    setFormatted(R7200_C3, sumVals(R7210_C3, R7220_C3, R7230_C3, R7240_C3, R7250_C3, R7260_C3));
    setFormatted(R7200_C4, sumVals(R7210_C4, R7220_C4, R7230_C4, R7240_C4, R7250_C4, R7260_C4));

    // 7300 = 7310 + 7320 + 7330
    setFormatted(R7300_C1, sumVals(R7310_C1, R7320_C1, R7330_C1));
    setFormatted(R7300_C2, sumVals(R7310_C2, R7320_C2, R7330_C2));
    setFormatted(R7300_C3, sumVals(R7310_C3, R7320_C3, R7330_C3));
    setFormatted(R7300_C4, sumVals(R7310_C4, R7320_C4, R7330_C4));

    // 7400 = 7410 + 7420 + 7430 + 7440 + 7450 + 7460 + 7470 + 7480 + 7490
    setFormatted(R7400_C1, sumVals(R7410_C1, R7420_C1, R7430_C1, R7440_C1, R7450_C1, R7460_C1, R7470_C1, R7480_C1, R7490_C1));
    setFormatted(R7400_C2, sumVals(R7410_C2, R7420_C2, R7430_C2, R7440_C2, R7450_C2, R7460_C2, R7470_C2, R7480_C2, R7490_C2));
    setFormatted(R7400_C3, sumVals(R7410_C3, R7420_C3, R7430_C3, R7440_C3, R7450_C3, R7460_C3, R7470_C3, R7480_C3, R7490_C3));
    setFormatted(R7400_C4, sumVals(R7410_C4, R7420_C4, R7430_C4, R7440_C4, R7450_C4, R7460_C4, R7470_C4, R7480_C4, R7490_C4));

    // 7500 = 7510 + 7520
    setFormatted(R7500_C1, sumVals(R7510_C1, R7520_C1));
    setFormatted(R7500_C2, sumVals(R7510_C2, R7520_C2));
    setFormatted(R7500_C3, sumVals(R7510_C3, R7520_C3));
    setFormatted(R7500_C4, sumVals(R7510_C4, R7520_C4));

}